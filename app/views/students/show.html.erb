<div class="wrapper-12 panel-wrapper">
  <% if can?(:activate, @student) && !@student.activated %>
    <div class="col-md-12 flash-message on-profile">
      <div class="alert alert-warning">
        <p><%= t("students.activation_reminder") %></p>
        <%= simple_form_for @student, url: activate_student_url(@student) do |f| %>
          https://openid.hpi.uni-potsdam.de/user/ <%= f.text_field :username, id: 'open-id-field', class: 'form-control' %>
          <%= f.submit t("links.verify"), class: 'btn btn-xs btn-primary' %>
      <% end %>
      </div>
    </div>
  <% end %>
  <div class="col-sm-6">
      <div class="pull-right">
      </div>
    </div>

  <div class="row">    
    <div class="col-sm-6 text-left">
      <p>
        <% if can? :edit, @student %>
          <%= link_to t("links.edit"), edit_student_path(@student.id), class: "btn btn-default pull-right" %>
        <% end %>
        <% if current_user.admin? && !@student.activated %>
          <%= link_to t("links.activate"), activate_student_path(@student.id), class: "btn btn-default pull-right" %>
        <% end %>
        <% if can?(:destroy, @student) %>
          <%= link_to t("links.destroy"), student_path(@student.id), :method => :delete, class: "btn btn-default pull-right", data: { confirm: 'Sind Sie sicher, dass Sie diesen Studenten löschen möchten?' } %>
        <% end %>
      </p>
    </div>
  </div>
</div>

<div class="wrapper-12 panel-wrapper">
  <div class="row">
    <div class="col-sm-6">
      <div class="panel panel-default">
        <div class="panel-heading"><h4><%= @student.firstname %> <%= @student.lastname %></h4></div>
        <ul class="list-group">
          <% unless @student.employment_status.nil? %>
            <li class="list-group-item">
              <div class="row">
                <div class="col-sm-4">
                  <%= t("activerecord.attributes.user.status") %>
                </div>
                <div class="col-sm-8">
                  <%= t("activerecord.attributes.user_status." +  @student.employment_status) %>
                </div>
              </div>
            </li>
          <% end %>
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-4">
                <%= t("activerecord.attributes.user.birthday") %>
              </div>
              <div class="col-sm-8">
                <%= @student.birthday %>
              </div>
            </div>
          </li>
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-4">
                <%= t("activerecord.attributes.user.email") %>
              </div>
              <div class="col-sm-8">
                <%= @student.email %>
              </div>
            </div>
          </li>
          <% if @student.alumni_email %>
            <li class="list-group-item">
              <div class="row">
                <div class="col-sm-4">
                  <%= t("activerecord.attributes.alumni.alumni_email") %>
                </div>
                <div class="col-sm-8">
                  <%= @student.alumni_email %>
                </div>
              </div>
            </li>
          <% end %>
          <li class="list-group-item">
            <div class="row">
              <div class="col-sm-4">
                <%= t("activerecord.attributes.user.cv") %>
              </div>
              <div class="col-sm-8">
                <% if (@student.user.cv.path).nil? %>
                  <%= image_tag('file_thumbnails/missing.png', size: "16") %>
                <% else %>
                  <p class="text-muted">
                    <%= link_to(@student.user.cv.url) do %>
                      <%= image_tag('file_thumbnails/pdf.png', size: "16") %> <%= t('activerecord.attributes.user.cv') %>
                    <% end %>
                  </p>
                <% end %>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <% if !(@student.semester).nil? || !(@student.academic_program).nil? || !(@student.graduation).nil? %>
        <div class="panel panel-default">
          <div class="panel-heading"><h4><%= t("users.career") %></h4></div>
          <ul class="list-group">
            <li class="list-group-item">
              <div class="row">
                <div class="col-sm-4">
                  <%= t("activerecord.attributes.@student.academic_program")%>
                </div>
                <div class="col-sm-8">
                  <%= t("activerecord.attributes.user.academic_rank_options." + @student.academic_program) %>
                </div>
              </div>
            </li>
            <li class="list-group-item">
              <div class="row">
                <div class="col-sm-4">
                  <%= t("activerecord.attributes.@student.semester")%>
                </div>
                <div class="col-sm-8">
                  <%= @student.semester %>
                </div>
              </div>
            </li>
            <li class="list-group-item">
              <div class="row">
                <div class="col-sm-4">
                  <%= t("activerecord.attributes.@student.education")%>
                </div>
                <div class="col-sm-8">
                  <%= t("activerecord.attributes.user.degrees." + @student.graduation) %>
                </div>
              </div>
            </li>
          </ul>
        </div>
      <% end %>
      <% if signed_in? && (current_user?(@student.user) || current_user.admin? || current_user.staff?) && !@job_offers.empty? %>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4><%= t("activerecord.attributes.user.jobs")%></h4>
          </div>
            <%= render 'shared/jobs_listing_detailed', job_offer_list: @job_offers %>
        </div>
      <% end %>

      <%= render 'profile', student: @student%>
  </div>
</div>
